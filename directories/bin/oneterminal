#!/usr/bin/bash
#Maintained in linux-init-files.org

sessionname="${1:-`pwd`}"
title="${ONETERM_TITLE:-${sessionname}}"
#sessionname="${sessionname//[^[:alnum:]]/}"
script="${2}"
tflags="${3}"

profile="${ONETERM_PROFILE:-"$(hostname)"}"


if ! sway-do-tool "$title"; then
    #          terminator -T "${title}" -p "${profile}" ${tflags} -e "tmux new-session -A -s ${sessionname} ${script}"
    alacritty --title "${title}"  --class "${title}" --command bash -c "tmux new-session -A -s ${sessionname} ${script}"
    #          kitty --title "$title"  --class "$title" "sh -c tmux new-session -A -s ${sessionname} ${script}"
else
    if ! tmux has-session -t  "${sessionname}"; then
        tmux attach -t "${sessionname}"
    fi
fi
exit 0
