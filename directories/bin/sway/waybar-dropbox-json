#!/usr/bin/env bash
# Maintained in linux-config.org
if ( ! dropbox running ); then
    fullstat="$(dropbox status)"
    stat="$(sed -n 1p <<< $fullstat)"
else
    fullstat=""
    stat="Restarting Dropbox.."
    dropbox start &> /dev/null
fi

jq --unbuffered --compact-output -n \
   --arg text "$stat" \
   --arg tooltip "$fullstat" \
   --arg class "dropbox-status" \
   '{text: $text, tooltip: $tooltip, class: $class}'
