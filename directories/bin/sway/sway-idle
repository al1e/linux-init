#!/usr/bin/env bash
# Maintained in linux-config.org
pidof swayidle  && killall -9 swayidle
exec swayidle -w \
     timeout 1 '' \
     resume 'sway-lock-utils unblank' \
     timeout 10 'pidof swaylock && sway-lock-utils blank' \
     resume 'sway-lock-utils unblank' \
     timeout ${XIDLEHOOK_BLANK:-900} 'sway-lock-utils blank' \
     resume 'sway-lock-utils unblank' \
     timeout ${XIDLEHOOK_LOCK:-1800} 'sway-lock' \
     resume 'sway-lock-utils unblank' \
     timeout ${XIDLEHOOK_SUSPEND:-7200} 'sway-lock-utils suspend' \
     resume 'sway-lock-utils unblank' \
     lock 'sway-lock' \
     before-sleep 'sway-lock'
