#!/usr/bin/bash
# Maintained in linux-config.org
pidof swayidle  && echo "swayidle process $(pidof swayidle) already running. Exiting." && exit 0
exec swayidle -w \
     timeout 1 '' \
     resume 'sway-lock-utils unblank' \
     timeout 10 'pidof swaylock && sway-lock-utils blank' \
     resume 'sway-lock-utils unblank' \
     timeout ${XIDLEHOOK_BLANK:-300} 'sway-lock-utils blank' \
     resume 'sway-lock-utils unblank' \
     timeout ${XIDLEHOOK_LOCK:-900} 'sway-lock' \
     resume 'sway-lock-utils unblank' \
     lock 'sway-lock' \
     before-sleep 'sway-lock'
