ifname="${1:-$(printf '%s' /sys/class/net/*/wireless | cut -d/ -f5)}"
[ -z "$ifname" ] && exit 1
pubip="$(curl -s -m 1 ipinfo.io/ip)"
pubip="$([ -z "$pubip" ] && echo "Offline" || echo "$pubip")"
lip=$(ip -j address | jq -r '.[] | select (.ifname=='\"$ifname\"').addr_info[] | select(.family=="inet").local')
lip="$([ -z "$lip" ] && echo "Offline" || echo "$lip")"
echo "{  \"text\" = \"$lip\", \"tooltip\" = \"$pubip\",\"ifname\" = \"$ifname\",\"public_ip\" = \"$pubip\",\"local_ip\" = \"$lip\"}"
